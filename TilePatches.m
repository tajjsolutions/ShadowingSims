clear; close all; clc

f = 28e9;
c = physconst('LightSpeed');
lambda = c / f;
r = 5 * lambda;
clearance = 0.01;
dz = clearance;

s = r / cosd(30);

centers = TilePositions(clearance, r);

face1 = [1 2 3 4 5 6; 7 8 9 10 11 12];
face2 = [1 2 8 7; 2 3 9 8; 3 4 10 9; 4 5 11 10; 5 6 12 11; 6 1 7 12];

for i = 1:19
    
    vertex = [...
        centers(1,i) + s, centers(2,i), 0;...
        centers(1,i) + s/2, centers(2,i) + r, 0;...
        centers(1,i) - s/2, centers(2,i) + r, 0;...
        centers(1,i) - s, centers(2,i), 0;...
        centers(1,i) - s/2, centers(2,i) - r, 0;...
        centers(1,i) + s/2, centers(2,i) - r, 0;...
        ...
        centers(1,i) + s, centers(2,i), dz;...
        centers(1,i) + s/2, centers(2,i) + r, dz;...
        centers(1,i) - s/2, centers(2,i) + r, dz;...
        centers(1,i) - s, centers(2,i), dz;...
        centers(1,i) - s/2, centers(2,i) - r, dz;...
        centers(1,i) + s/2, centers(2,i) - r, dz;...
    ];
    patch('Faces', face1, 'Vertices', vertex, 'Facecolor', [0.8 0.8 1]);
    patch('Faces', face2, 'Vertices', vertex, 'Facecolor', [0.8 0.8 1]);
    view(3);
    xlim([-0.3 0.3]);
    ylim([-0.3 0.3]);
    zlim([-0.3 0.3]);
end